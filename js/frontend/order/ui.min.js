!function(e){"use strict";var t=function(e){return t=function(e){var t=this;t.$wrapper=e.$wrapper,t.on={ready:"function"==typeof e.ready?e.ready:function(){},change:"function"==typeof e.change?e.change:function(){}},t.active_class=e.active_class||"selected",t.$before=null,t.$active=t.$wrapper.find("> *."+t.active_class),t.initClass()},t.prototype.initClass=function(){function t(t){t.preventDefault();var i=e(this);if(i.hasClass(n))return!1;o.$active.length&&(o.$before=o.$active.removeClass(n)),o.$active=i.addClass(n),o.$wrapper.trigger("change",[this,o]),o.on.change(t,this,o)}var o=this,n=o.active_class;o.$wrapper.on("click","> *",t),o.$wrapper.trigger("ready",o),o.on.ready(o)},t}(e),o=function(e){return o=function(t){var o=this;o.$wrapper=t.$wrapper,o.$wrapper&&o.$wrapper.length?(o.$block=o.$wrapper.find(".wa-dialog-body"),o.$body=e(window.top.document).find("body"),o.$window=e(window.top),o.position=t.position||!1,o.userPosition=t.setPosition||!1,o.options=t.options||!1,o.scroll_locked_class="is-scroll-locked",o.height_limit=t.height_limit||640,o.is_visible=!1,o.is_removed=!1,o.onBgClick=t.onBgClick||!1,o.onOpen=t.onOpen||function(){},o.onClose=t.onClose||function(){},o.onResize=t.onResize||!1,o.initClass()):console.error("Error: bad data for dialog")},o.prototype.initClass=function(){var e=this;e.$wrapper.data("dialog",e),e.render(),setTimeout(function(){e.bindEvents()},0),e.$wrapper.data("dialog",e).trigger("wa_order_dialog_open",[e.$wrapper,e])},o.prototype.bindEvents=function(){function t(){!0===r.close()&&(a.off("click",t),a.off("wa_before_load",t))}function o(){e.contains(document,r.$wrapper[0])?r.resize():(e(window).off("resize",o),a.off("resize",o))}function n(){e.contains(document,r.$wrapper[0])?r.resize():e(document).off("resizeDialog",n)}function i(t){if(r.is_removed)e(document).off("keyup",i);else{switch(t.keyCode){case 27:r.close();break;case 13:var o=r.$wrapper.find(".js-focus-button");1===o.length&&o.trigger("click")}}}var r=this,a=e(document),s=r.$block?r.$block:r.$wrapper;r.$wrapper.on("close",t),r.$wrapper.on("click",".dialog-background",function(e){"function"==typeof r.onBgClick?r.onBgClick(e):e.stopPropagation()}),s.on("click",".js-close-dialog",t),e(window).on("resize",o),a.on("resize",o),a.on("resizeDialog",n),e(document).on("keyup",i)},o.prototype.render=function(){var e=this;try{e.show()}catch(e){console.error("Error: "+e.message),console.log(e.stack)}e.setPosition(),e.onOpen(e.$wrapper,e)},o.prototype.setPosition=function(){function e(e){return{left:Math.floor((a-e.width)/2),top:Math.floor((s-e.height)/2)}}var t=this,o=t.$window,n=t.$block,i=n.find(".wa-dialog-content");n.removeClass("is-tall"),n.removeClass("with-tall-content"),i.removeAttr("style");var r,a=o.width(),s=o.height(),c=n.outerWidth(),l=n.outerHeight();if(t.position)r=t.position;else{r=(t.userPosition?t.userPosition:e)({width:c,height:l})}if(r.left>0&&r.left+c>a&&(r.left=a-c-20),r.top>0)l>=t.height_limit&&n.addClass("with-tall-content"),r.top+l>s&&(r.top=s-l-20),t.$body.removeClass(t.scroll_locked_class);else{r.top=20,n.addClass("is-tall"),i.hide();var p=n.outerHeight(),d=s-p-40;i.css({height:d+"px"}).show(),t.$body.addClass(t.scroll_locked_class)}n.css(r)},o.prototype.close=function(){var e=this,t=null;return e.is_visible&&!1!==(t=e.onClose(e))&&(e.$wrapper.remove(),e.is_removed=!0),e.$body.removeClass(e.scroll_locked_class),t},o.prototype.resize=function(){var e=this;e.$block.addClass("is-animated"),e.setPosition(),e.onResize&&e.onResize(e.$wrapper,e)},o.prototype.hide=function(){var t=this;e("<div />").append(t.$wrapper.hide()),t.is_visible=!1},o.prototype.show=function(){var t=this;e.contains(document,t.$wrapper[0])||t.$body.append(t.$wrapper),t.$wrapper.show(),t.is_visible=!0,e(window).trigger("scroll")},o.prototype.lock=function(e){var t=this;"boolean"==typeof e&&(e?t.$wrapper.addClass("is-locked"):t.$wrapper.removeClass("is-locked"))},o}(e),n=function(e){function t(e,t){var o={hover:!0,change_selector:"",change_class:"selected",change_title:!0,change_hide:!0};return!1===(void 0!==t.hover?t.hover:e.data("hover"))&&(o.hover=!1),o.change_selector=t.change_selector||e.data("change-selector")||"",o.change_class=t.change_class||e.data("change-class")||"selected",!1===(void 0!==t.change_title?t.change_title:e.data("change-title"))&&(o.change_title=!1),!1===(void 0!==t.change_hide?t.change_hide:e.data("change-hide"))&&(o.change_hide=!1),o}return n=function(e){var o=this;o.$wrapper=e.$wrapper,o.$button=o.$wrapper.find("> .wa-dropdown-toggle"),o.$menu=o.$wrapper.find("> .wa-dropdown-area"),o.on={ready:"function"==typeof e.ready?e.ready:function(){},open:"function"==typeof e.open?e.open:function(){},change:"function"==typeof e.change?e.change:function(){}},o.data=t(o.$wrapper,e),o.is_opened=!1,o.$before=null,o.$active=null,o.initClass()},n.prototype.initClass=function(){function t(o){if(e.contains(document,n.$wrapper[0])){var i=27===o.keyCode;n.is_opened&&i&&n.hide()}else e(document).off("click",t)}function o(t){var i=n.$wrapper[0];if(e.contains(document,i)){var r=t.target===i||e.contains(i,t.target);n.is_opened&&!r&&n.hide()}else e(document).off("click",o)}var n=this;n.data.hover&&(n.$button.on("mouseenter",function(){n.toggleMenu(!0)}),n.$wrapper.on("mouseleave",function(){n.toggleMenu(!1)})),n.$button.on("click",function(e){e.preventDefault(),n.toggleMenu(!n.is_opened)}),n.data.change_selector&&n.initChange(n.data.change_selector),e(document).on("click",o),e(document).on("keyup",t),n.on.ready(n)},n.prototype.toggleMenu=function(e){var t=this;if(e){!1!==t.on.open(t)&&t.$wrapper.addClass("is-opened").trigger("open",t)}else t.$wrapper.removeClass("is-opened").trigger("close",t);t.is_opened=e},n.prototype.initChange=function(t){function o(t){t.preventDefault();var o=e(this);n.$active.length&&(n.$before=n.$active.removeClass(i)),n.$active=o.addClass(i),n.data.change_title&&n.setTitle(o.html()),n.data.change_hide&&n.hide(),n.$wrapper.trigger("change",[o[0],n]),n.on.change(t,this,n)}var n=this,i=n.data.change_class;n.$active=n.$menu.find(t+"."+i),n.$wrapper.on("click",t,o)},n.prototype.hide=function(){this.toggleMenu(!1)},n.prototype.setTitle=function(e){this.$button.html(e)},n}(e),i=function(e){var t=!1;return e.length>0&&(e.match(/^[0-9]+(\.+[0-9]+)?$/i)||[]).length>=1&&(t=!0),t},r=function(e){var t=!1;return e.length>0&&(e.match(/^.+@+.+\.+.+$/i)||[]).length>=1&&(t=!0),t},a=function(e){var t=!1;return e.length>0&&(e.match(/^(http:\/\/|https:\/\/)?.+\.+.+$/i)||[]).length>=1&&(t=!0),t},s=function(e){var t=!1;return e.length>0&&(e.match(/^(\+?)+([0-9]|\s|-|\(|\))+$/i)||[]).length>=1&&(t=!0),t},c=null,l=function(e,t){var o=e,n=c;if(!n)return o;try{if((e=parseFloat(e))>=0&&n){var i=Math.floor(e),r=function(e,t,o){var n="";if(!(t&&e&&o))return e;for(var i=e.split("").reverse(),r=[],a=[],s=0;s<i.length;s++){var c=i[s],l=0===s,p=s===i.length-1;0!==s%t||l||(r.unshift(a),a=[]),a.unshift(c),p&&r.unshift(a)}for(s=0;s<r.length;s++){var d=s===r.length-1;n+=r[s].join("")+(d?"":o)}return n}(""+i,n.group_size,n.group_divider),a=function(e){var t="";if(e>0){e=e.toFixed(n.fraction_size+1),e=Math.round(e*Math.pow(10,n.fraction_size))/Math.pow(10,n.fraction_size);t=(parseFloat(e.toFixed(n.fraction_size))+"").replace("0.",n.fraction_divider)}return t}(e-i);o=(t?n.pattern_text:n.pattern_html).replace("%s",r+a)}}catch(t){console&&console.log&&console.log(t.message,e)}return o},p=function(e){e&&(c=e)};window.waOrder=window.waOrder||{},window.waOrder.ui={Toggle:t,Dialog:o,Dropdown:n,validate:{url:a,email:r,phone:s,number:i},formatPrice:l,initFormatPrice:p},"ontouchstart"in window&&e("html").addClass("is-mobile").addClass("with-touch")}(jQuery);
//# sourceMappingURL=ui.min.js.map
