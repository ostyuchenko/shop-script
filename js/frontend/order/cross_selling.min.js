!function(e){"use strict";var r=function(e){return r=function(r){var t=this;if(!(r.outer_options&&"string"==typeof r.outer_options.wrapper&&r.outer_options.wrapper.length>0))throw new Error("Checkout wrapper element not specified.");var o=e(r.outer_options.wrapper);if(1!==o.length)throw new Error("Error: Checkout wrapper element must be exactly one on page (found "+o.length+")");t.$outer_wrapper=o,t.$wrapper=r.$wrapper,t.options=r.outer_options,t.urls=r.urls,t.templates=r.templates,t.reload_xhr=null,t.init()},r.prototype.init=function(){var r=this;e(document);r.$wrapper.find(".wa-cross_selling-body > .wa-cross_selling-loader").remove(),r.$wrapper.removeClass("is-not-ready").find(".js-invisible-content").removeAttr("style").removeClass("js-invisible-content"),r.$outer_wrapper.data("controller",r),r.trigger("ready",r),r.initSlider(),r.initAddProduct(),new window.waOrder.ui.Styler({$wrapper:r.$wrapper,periods:[{min:null,max:420,class:"width-s"},{min:421,max:580,class:"width-m"},{min:581,max:null,class:"width-l"}]})},r.prototype.DEBUG=function(){var e=this,r=console.log,t={hint:"font-weight: bold; color: #666;",info:"font-weight: bold; font-size: 1.25em; color: blue;",warn:"font-weight: bold; font-size: 1.25em;",error:"font-weight: bold; font-size: 1.25em;"};if(e.options&&e.options.DEBUG){if(t[arguments[1]]){switch(arguments[0]="string"==typeof arguments[0]?"%c"+arguments[0]:arguments[0],arguments[1]){case"info":r=console.info;break;case"error":r=console.error;break;case"warn":r=console.warn}arguments[1]=t[arguments[1]]}return r.apply(console,arguments)}},r.prototype.initSlider=function(){var r=this,t=r.$wrapper.find(".js-slider-wrapper"),o=function(e){return o=function(e){var r=this;r.$wrapper=e.$wrapper,r.$list=e.$list,r.$items=e.$slides,r.$next=e.$next,r.$prev=e.$prev,r.items_count=r.$items.length,r.touch_enabled="ontouchstart"in window,r.left=0,r.visible_w=null,r.full_w=null,r.item_w=null,r.init()},o.prototype.init=function(){function r(){e.contains(document,t.$wrapper[0])?setTimeout(function(){t.reset()},10):o.off("resize",r)}var t=this,o=e(window);t.touch_enabled&&t.$wrapper.addClass("with-touch"),setTimeout(function(){t.update()},10);var i=0;t.$list.on("scroll",function(){t.left=t.$list.scrollLeft(),clearTimeout(i),i=setTimeout(function(){t.showArrows()},100)}),t.$prev.on("click",function(e){e.preventDefault(),t.move(!1)}),t.$next.on("click",function(e){e.preventDefault(),t.move(!0)}),o.on("resize",r)},o.prototype.update=function(){var e=this;e.visible_w=e.$list.outerWidth(),e.full_w=e.$list[0].scrollWidth,e.item_w=e.$items.length?e.full_w/e.$items.length:0,e.showArrows()},o.prototype.showArrows=function(){var e=this,r=!1;e.left>0?(e.$prev.removeClass("disabled"),e.left+e.visible_w>=e.full_w?e.$next.addClass("disabled"):e.$next.removeClass("disabled")):(e.$prev.addClass("disabled"),e.visible_w>=e.full_w?(e.$next.addClass("disabled"),r=!0):e.$next.removeClass("disabled")),r?e.$wrapper.addClass("is-short"):e.$wrapper.removeClass("is-short")},o.prototype.set=function(e){var r=this;r.$list.scrollLeft(e),r.left=e},o.prototype.move=function(e){var r=this,t=r.left+r.item_w*(e?1:-1);t<0?t=0:t+r.visible_w>=r.full_w&&(t=r.full_w-r.visible_w),t=Math.round(t),r.set(t),r.showArrows()},o.prototype.reset=function(){var e=this;e.set(0),e.update()},o}(e);new o({$wrapper:t,$list:t.find(".wa-slider-list"),$slides:t.find(".wa-slide-wrapper"),$next:t.find(".js-scroll-next"),$prev:t.find(".js-scroll-prev")})},r.prototype.initAddProduct=function(){function r(r){o.lock(!0);var i=o.urls.product_dialog,n=function(e){var r=[],t=e.data("product-id");t?r.push({name:"id",value:t}):o.DEBUG("Product ID required","error");var i=e.data("sku-id");return i&&r.push({name:"sku_id",value:i}),r}(r);e.post(i,n).always(function(){o.lock(!1)}).done(function(i){new window.waOrder.ui.Dialog({$wrapper:e(i),options:{scope:o,onSubmit:function(e){return t(r,e)}}})})}function t(r,t){var i=r.data("add_promise");return i||(t=t||r.data("sku-id"),i=function(r,t){var i=o.urls.add_product,n={"item[product_id]":t,"item[sku_id]":r,"item[quantity]":1};return e.post(i,n,"json").done(function(r){e(document).trigger("wa_order_product_added")})}(t,r.data("product-id")),r.data("add_promise",i),i.done(function(){var t=r.find(".js-add-product"),i=e(o.templates.success_button);t.hide().before(i),setTimeout(function(){i.remove(),t.show()},2e3)}).always(function(){r.data("add_promise",null),i=null})),i}var o=this;o.$wrapper.on("click",".js-add-product",function(o){o.preventDefault();var i=e(this).closest(".wa-product-wrapper");i.data("skus-count")>1?r(i):t(i)})},r.prototype.trigger=function(e,r){var t=this,o="wa_order_cross_selling_"+e;t.$wrapper.triggerHandler(e,r||null),t.$outer_wrapper.trigger(o,r||null)},r.prototype.reload=function(){var r=this,t=e.Deferred(),o=r.urls.refresh,i={opts:r.options};return r.reload_xhr||(r.lock(!0),r.trigger("before_reload",r),r.reload_xhr=e.post(o,i,function(e){r.$outer_wrapper.one("wa_order_cart_ready",function(){var e=r.$outer_wrapper.data("controller");t.resolve(e)}),r.$wrapper.replaceWith(e),r.trigger("reloaded",r)}).always(function(){r.lock(!1),r.reload_xhr=!1})),t.promise()},r.prototype.lock=function(e){var r=this;e?r.$wrapper.addClass("is-locked"):r.$wrapper.removeClass("is-locked")},r}(e);window.waOrder=window.waOrder||{},window.waOrder.CrossSelling=r}(jQuery);
//# sourceMappingURL=cross_selling.min.js.map
