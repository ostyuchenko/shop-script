{strip}

{$_is_ru = $wa->locale() == 'ru_RU'}
{$_lang = "en"}{if $_is_ru}{$_lang = "ru"}{/if}
{$_page_title = _w("PREMIUM license functionality")}
{$_sprite_url = "`$wa_url`wa-apps/shop/img/backend/settings/premium/icons.svg?v=`$wa->version()`"}
{$_version = "2022.02.09.1236"}

{$_demo_urls = null}
{if $wa->locale() == 'ru_RU'}
    {$_demo_urls = [
        'backend' => 'https://demo.shop-script.ru/webasyst/shop/?action=products',
        'storefront' => 'https://demo.shop-script.ru/'
    ]}
{/if}

{$_has_license = shopLicensing::hasLicense()}
{$_is_premium = shopLicensing::hasPremiumLicense()}
{$_buy_premium_link_url = "`$wa_backend_url`installer/store/app/shop/"}

{$_features = [
    [
        "title" => _w("Kanban view for orders"),
        "description" => _w("See all orders at a glance by status on a kanban board. User filter to focus on specific order segments. Drag an order to quickly change its status."),
        "image" => [
            "name" => "image0.jpg"
        ]
    ],
    [
        "title" => _w("Arbitrary product quantity units"),
        "description" => _w("Product quantities displayed in the storefront can be expressed in any units of your choice. You may want to sell products in packages, pieces, linear feet, or any other quantity units. Select units from a built-in list or add any custom units which you may need."),
        "image" => [
            "name" => "image1.jpg"
        ]
    ],
    [
        "title" => _w("Two quantity units, with their corresponding prices, for convenient products comparison"),
        "description" => _w("This may be convenient for selling flooring materials, which are usually sold in packages (stock quantity units) and whose prices can be conveniently compared per square foot (base quantity unit). Set two quantity units for such products, with a conversion ratio between them, to have them displayed in the storefront with two prices, each for one of the two units. You only need to specify a price per stock unit, as usual, and a price per base unit will be calculated automatically, according to the specified conversion ratio."),
        "image" => [
            "name" => "image2.jpg"
        ]
    ],
    [
        "title" => _w("Sorting & filtering of products by the prices of different quantity units"),
        "description" => _w("If a category contains products with different quantity units then a customer can select any of those units which is most convenient for filtering or sorting products in a particular case."),
        "image" => [
            "name" => "image3.jpg"
        ]
    ],
    [
        "title" => _w("Selling fractional product quantities"),
        "description" => _w("Sell fractional product quantities with precision up to 0.001. You can set individual quantity precision degree for every product. For example, clothes buttons can be sold by dozens or pieces, and fabric can be sold with the precision of 0.01 feet."),
        "image" => [
            "name" => "image4.jpg"
        ]
    ],
    [
        "title" => _w("Custom product add-to-cart step"),
        "description" => _w("Configure an individual add-to-cart step for each product so that customers can add only quantities, divisible by the specified step values, to the shopping cart. For weight products, the add-to-cart step may be set to 0.01 lb., or to 8.5 sq. ft. for ceramic tiles (quantity contained in an individual package)."),
        "image" => [
            "name" => "image5.jpg"
        ]
    ],
    [
        "title" => _w("Minimum orderable product quantity"),
        "description" => _w("Set a minimum quantity for each product below which cannot be added to the shopping cart. For example, 0.3 m for fabrics sold by linear feet, or 0.5 kg for fruits and vegetables, which are sold by weight."),
        "image" => [
            "name" => "image6.jpg"
        ]
    ]
]}

{/strip}
<style>
    .s-settings > .content.not-blank { background: var(--background-color-blank) !important; }
    .s-settings > .content .article-body { padding-top: 2rem; }
    .s-settings > .shop-second-sidebar { border-right: 1px solid var(--border-color-soft); }

    /* Animation css */
    .stars-animation-container {
        position: relative;
    }
    .stars-animation {
        position: absolute;
        display: flex;
        gap: 5rem;
        top: 50%;
        left: 50%;
        transform: translate(-58%, -100%);
        min-width: 300px;
    }

    .stars-animation--left, .stars-animation--right {
        flex: auto;
        position: relative;
        display: flex;
        flex-direction: column;
        flex-wrap: wrap;
        max-height: 100px;
    }
    .stars-animation span {
        position: relative;
        height: 24px;
        width: 24px;
        background: url('{$wa_url}wa-apps/shop/img/backend/settings/premium/star-bg.svg?v={$wa->version()}') no-repeat center;
        animation-timing-function: linear;
        animation-iteration-count: infinite;
        animation-duration: calc(40s / var(--star-i));
        animation-fill-mode: forwards;
    }

    .stars-animation--left span:nth-child(n + 5) { /*n + 5 or odd */
        animation-direction: normal;
        animation-name: animationStarsLeft
    }
    .stars-animation--left span:nth-child(-n + 5) { /*-n + 5 or even*/
        animation-direction: normal;
        animation-name: animationStarsLeft2N;
    }
    .stars-animation--right span:nth-child(n + 5) { /*n + 5 or odd */
        animation-direction: normal;
        animation-name: animationStarsRight
    }
    .stars-animation--right span:nth-child(-n + 5) { /*-n + 5 or even*/
        animation-direction: normal;
        animation-name: animationStarsRight2N;
    }

    @keyframes animationStarsLeft {
        0% {
            transform: translate(3rem, 1rem) scale(0.4);
        }
        90% {
            transform: translate(-2rem, 0) scale(1) rotate(90deg);
            opacity: .5;
        }
        100% {
            opacity: 0;
            transform: scale(0);
        }
    }
    @keyframes animationStarsLeft2N {
        0% {
            transform: translate(3rem, 2rem) scale(0);
        }
        90% {
            transform: translate(-2rem, 0) scale(1) rotate(90deg);
            opacity: .5;
        }
        100% {
            opacity: 0;
            transform: scale(0);
        }
    }

    @keyframes animationStarsRight {
        0% {
            transform: translate(-3rem, 2rem) scale(0.4);
        }
        90% {
            transform: translate(2rem, 0) scale(1) rotate(90deg);
            opacity: .5;
        }
        100% {
            opacity: 0;
            transform: scale(0);
        }
    }
    @keyframes animationStarsRight2N {
        0% {
            transform: translate(-2rem, 1rem) scale(0);
        }
        90% {
            transform: translate(-2rem, 0) scale(1) rotate(90deg);
            opacity: .5;
        }
        100% {
            opacity: 0;
            transform: scale(0);
        }
    }

    .s-premium-star { animation: animationStar 5s infinite; }
    @keyframes animationStar {
        0% {
            transform: scale(1);
        }
        50% {
            transform: scale(1.3);
        }
        100% {
            transform: scale(1);
        }
    }
    /* Animation css */
</style>
<div class="s-settings-premium-page" id="js-settings-premium-page" style="visibility: hidden;">
    {* @event backend_settings_premium.top *}
    {if !empty($backend_settings_premium)}{foreach $backend_settings_premium as $_}{ifset($_.top)}{/foreach}{/if}

    <div class="s-page-header s-premium-block custom-py-20">
        <div class="stars-animation-container">
            <div class="s-premium-star"></div>
            <div class="stars-animation">
                <div class="stars-animation--left">
                    {for $i=0 to 25}
                        <span style="--star-i:{10|rand:30};top:{10|rand:50}px;left:{10|rand:50}px;"></span>
                    {/for}
                </div>
                <div class="stars-animation--right">
                    {for $i=0 to 25}
                        <span style="--star-i:{10|rand:30};top:{10|rand:50}px;left:{10|rand:50}px;"></span>
                    {/for}
                </div>
            </div>
        </div>
        <h1 class="align-center h2-mobile custom-m-0">[`Shop-Script at its max!`]</h1>
        <p class="align-center width-70 width-100-mobile custom-mx-auto" style="font-size: 18px;max-width: 550px;">[`Больше возможностей и бесплатные безлимитные обновления без дополнительных подписок навсегда.`]</p>

        {if empty($_is_premium)}
            <div class="s-information-block align-center">
                <div class="s-btn-block">
                    {if 1||!empty($_has_license)}
                        <div class="s-plan semibold italic custom-my-16">{sprintf(_w("Your current license is %s."), _w("PRO"))}</div>
                        <a href="{$_buy_premium_link_url|escape}" class="s-premium-btn button rounded large">[`Подключить «Премиум»`]</a>
                    {else}
                        <div class="s-plan state-caution italic custom-my-16">[`No valid license detected.`]</div>
                        <a href="{$_buy_premium_link_url|escape}" class="button green rounded large">[`Acquire license`]</a>
                    {/if}
                    {*<h6 class="align-center text-yellow custom-mt-16">[`Free updates forever!`]</h6>*}

                </div>
            </div>
        {/if}
    </div>

    <div class="s-page-body" id="js-information-block-place">
        <div class="s-features-list custom-mt-24-mobile custom-mb-24-mobile">
            {foreach $_features as $_feature}
                <div class="flexbox s-feature-wrapper vertical-mobile custom-mt-24-mobile">
                    <div class="s-description-wrapper width-100-mobile custom-p-8-mobile">
                        <h3 class="s-title">{$_feature.title|escape}</h3>
                        <p class="s-description">{$_feature.description|escape}</p>
                    </div>
                    <div class="s-image-wrapper custom-mt-8-mobile align-center-mobile">
                        <img class="s-image" src="{$wa_app_static_url}img/backend/settings/premium/{$_lang}/{$_feature.image.name|escape}?v={$_version}" alt="{$_feature.title|escape}" {if !empty($_feature.image.width)}style="max-width: {$_feature.image.width}"{/if}>
                    </div>
                </div>
            {/foreach}
        </div>

        {if !empty($_demo_urls)}
            <div class="s-information-block flexbox vertical-mobile s-block">
                <div class="s-image-wrapper custom-m-auto-mobile">
                    <span class="icon"><svg><use xlink:href='{$_sprite_url}#cogs'></use></svg></span>
                </div>
                <div class="s-text-wrapper">
                    <h2 class="h3-mobile"><span class="custom-mr-8 icon size-24 text-dark-gray desktop-and-tablet-only"><i class="fas fa-store"></i></span>[`Demo store`]</h2>
                    <p>[`Look how various products can be presented in the storefront and how you can manage the extended functionality available with the PREMIUM license.`]</p>
                    <div class="flexbox space-12 vertical-mobile align-center-mobile">
                        <a class="bold no-underline custom-mt-12-mobile" href="{$_demo_urls.storefront|escape}" target="_blank">
                            <span>[`Demo storefront`]</span>
                            <span class="icon size-12"><i class="fas fa-external-link-alt"></i></span>
                        </a>
                        <a class="bold no-underline custom-mt-12-mobile" href="{$_demo_urls.backend|escape}" target="_blank">
                            <span>[`Demo backend`]</span>
                            <span class="icon size-12"><i class="fas fa-external-link-alt"></i></span>
                        </a>
                    </div>
                </div>
            </div>
        {/if}
    </div>

    <script>
        ( function($) {

            document.title = {$_page_title|json_encode} + ' — ' + {$wa->accountName()|json_encode};

            var sources = [{
                id: "wa-settings-premium-css",
                type: "css",
                uri: "{$wa_app_static_url}css/backend/settings/premium.css?v={$wa->version()}"
            }];

            $.shop.loadSources(sources).then( function() {
                $("#js-settings-premium-page").css("visibility", "");
            }, function() {
                alert("Page Loading Error");
            });

        })(jQuery);
    </script>

    {* @event backend_settings_premium.bottom *}
    {if !empty($backend_settings_premium)}{foreach $backend_settings_premium as $_}{ifset($_.bottom)}{/foreach}{/if}

</div>
