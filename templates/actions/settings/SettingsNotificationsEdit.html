<div class="float-right">
    <ul class="menu-h">
        <li><a id="notification-delete" data-id="{$n.id}" href="#"><i class="icon16 delete"></i>[`Delete notification`]</a></li>
    </ul>
    <script type="text/javascript">
        $("#notification-delete").click(function () {
            var id = $(this).attr('data-id');
            var dialog = $('#s-settings-confirm-delete');   // html-code of dialog is located on main template
            if (dialog.parent().get(0) != document.body) {
                $(document.body).append(dialog);
            }
            dialog.waDialog({
                disableButtonsOnSubmit: true,
                onLoad: function() {
                    $(this).find('form').find('input[name=id]').val(id);
                },
                onSubmit: function(dialog) {
                    var form = $(this);
                    var loading_icon = dialog.find('.loading').show();
                    $.post(form.attr('action'), form.serialize(), function (response) {
                        if (response.status == 'ok') {
                            $("#notification-" + id).remove();
                            loading_icon.hide();
                            dialog.trigger('close');
                            $.settings.notificationsAction('');
                        }
                    }, "json");
                    return false;
                }
            });
            return false;
        });
    </script>
</div>

<h1>
    {$n.name}
    <span class="hint"><i class="icon16 {$transports[$n.transport].icon}"></i>{$transports[$n.transport].name}</span>
</h1>

<form id="notification-form" method="post" action="?module=settings&action=notificationsSave&id={$n.id}">
<div class="fields form">

    <!-- notification content (transport-dependent) -->
    <div class="field-group">
        <div class="field">
            <div class="name">[`Event`]</div>
            <div class="value no-shift">
                {$events[$n.event].name}
            </div>
        </div>
        <div class="field">
            <div class="name">[`Notification name`]</div>
            <div class="value">
                <input id="n-name" name="data[name]" type="text" class="bold" value="{$n.name}">
            </div>
        </div>

    <div class="field-group">
        {include file="templates/actions/settings/SettingsNotifications.`$n.transport`.html" inline}
    </div>


    <div class="field-group">
        <div class="field">
            <div class="value submit">
                {* <div class="block half-padded float-right">
                    <ul class="menu-h with-icons">
                        <li><a href="#" class="inline-link"><i class="icon16 script"></i><b><i>[`Cheat sheet`]</i></b><i class="icon10 darr-tiny"></i></a></li>
                    </ul>
                </div> *}
                <input type="submit" value="[`Save`]" class="button green">
            </div>
            {* <div class="value">
                <div class="block s-cheatsheet">
                    <div class="fields">
                        <div class="field">
                            <div class="name bold">
                                &#123;$order&#125;
                            </div>
                            <div class="value no-shift">
                                An array containing information about the order.
                            </div>
                        </div>
                        <div class="field s-sub-field">
                            <div class="name">
                                &#123;$order.id&#125;
                            </div>
                            <div class="value no-shift">
                                Order ID
                            </div>
                        </div>
                        <div class="field s-sub-field">
                            <div class="name">
                                &#123;$order.items&#125;
                            </div>
                            <div class="value no-shift">
                                Array containing information about ordered items
                            </div>
                        </div>
                        <div class="field s-sub-field">
                            <div class="name">
                                &#123;$order.items[].price&#125;
                            </div>
                            <div class="value no-shift">
                                Item price
                            </div>
                        </div>
                        <div class="field">
                            <div class="name bold">
                                &#123;$customer&#125;
                            </div>
                            <div class="value no-shift">
                                An array containing information about the customer.
                            </div>
                        </div>
                    </div>
                    <div class="clear-both"></div>                    
                </div>
            </div> *}
        </div>
    </div>

</div>
</form>

<div class="clear-left"></div>